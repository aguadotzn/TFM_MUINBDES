setwd("../data/hourly_data")
# List files
hourly_data <- list.files(pattern = ".*mo1[4-8].txt")
# Length and name of the columns
length <- c(8,2,2,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6)
col_name <- c("estacion","contaminante","tecnica","periodo","anyo","mes","dia","hora1","hora2","hora3","hora4","hora5","hora6","hora7","hora8","hora9","hora10","hora11","hora12","hora13","hora14","hora15","hora16","hora17","hora18","hora19","hora20","hora21","hora22","hora23","hora24")
# Load the data into a DataFrame.
for (file in hourly_data){
if (!exists("hourlyAirQuality")){
hourlyAirQuality <- read.fwf(file = file, widths = length, header = FALSE, col.names = col_name, na.strings = c("00.00N"))
}
if (exists("hourlyAirQuality")){
temp_dataset <- read.fwf(file = file, widths = length, header = FALSE, col.names = col_name, na.strings = c("00.00N"))
hourlyAirQuality <- rbind(hourlyAirQuality, temp_dataset)
rm(temp_dataset)
}
}
# Eliminamos la V de los valores válidos de cada medición horaria
for (i in 6:29) {
hourlyAirQuality[,i]<-gsub("V","",hourlyAirQuality[,i])
}
# Corregimos el tipo de dato de cada columna
hourlyAirQuality <- transform(hourlyAirQuality, estacion=as.factor(estacion), contaminante=as.factor(contaminante), tecnica=as.factor(tecnica), periodo=as.factor(periodo), fecha=as.Date(fecha, format("%y/%m/%d")))
hourlyAirQuality[,6:29] <- sapply(hourlyAirQuality[,6:29], as.numeric)
data <- as.matrix(hourlyAirQuality[,8:29])
# Default Heatmap
heatmap(data, scale="column")
# List files
hourly_data <- list.files(pattern = ".*mo1[8].txt")
# Length and name of the columns
length <- c(8,2,2,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6)
col_name <- c("estacion","contaminante","tecnica","periodo","anyo","mes","dia","hora1","hora2","hora3","hora4","hora5","hora6","hora7","hora8","hora9","hora10","hora11","hora12","hora13","hora14","hora15","hora16","hora17","hora18","hora19","hora20","hora21","hora22","hora23","hora24")
# Load the data into a DataFrame.
for (file in hourly_data){
if (!exists("hourlyAirQuality")){
hourlyAirQuality <- read.fwf(file = file, widths = length, header = FALSE, col.names = col_name, na.strings = c("00.00N"))
}
if (exists("hourlyAirQuality")){
temp_dataset <- read.fwf(file = file, widths = length, header = FALSE, col.names = col_name, na.strings = c("00.00N"))
hourlyAirQuality <- rbind(hourlyAirQuality, temp_dataset)
rm(temp_dataset)
}
}
# Unimos las col_name año, mes y dia en una única columna fecha
hourlyAirQuality<-transform(hourlyAirQuality, anyo=paste(anyo, mes, dia, sep="/"))
colnames(hourlyAirQuality)[5] <- "fecha"
hourlyAirQuality<-hourlyAirQuality[,!names(hourlyAirQuality) %in% c("mes", "dia")]
# Eliminamos la V de los valores válidos de cada medición horaria
for (i in 6:29) {
hourlyAirQuality[,i]<-gsub("V","",hourlyAirQuality[,i])
}
# Corregimos el tipo de dato de cada columna
hourlyAirQuality <- transform(hourlyAirQuality, estacion=as.factor(estacion), contaminante=as.factor(contaminante), tecnica=as.factor(tecnica), periodo=as.factor(periodo), fecha=as.Date(fecha, format("%y/%m/%d")))
hourlyAirQuality[,6:29] <- sapply(hourlyAirQuality[,6:29], as.numeric)
# Ordenamos el data frame por fecha, estación y contaminante
hourlyAirQuality <- hourlyAirQuality[order(hourlyAirQuality$fecha, hourlyAirQuality$estacion, hourlyAirQuality$contaminante),]
data <- as.matrix(hourlyAirQuality[,8:29])
View(data)
# Default Heatmap
heatmap(data, scale="column")
